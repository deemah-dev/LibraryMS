<UserControl x:Class="LibraryWPF.Views.LoginView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vms="clr-namespace:LibraryWPF.ViewModels"
        xmlns:local="clr-namespace:LibraryWPF.Views"
        xmlns:helpers="clr-namespace:LibraryWPF.Helpers"
        Background="White"
        FontFamily="Microsoft Sans Serif">
    <UserControl.DataContext>
        <vms:LoginViewModel/>
    </UserControl.DataContext>
    <UserControl.Resources>
        <!-- Color Palette -->
        <SolidColorBrush x:Key="PrimaryTeal" Color="#006064"/>
        <SolidColorBrush x:Key="LightTeal" Color="#00838F"/>
        <SolidColorBrush x:Key="VeryLightTeal" Color="#E0F7FA"/>
        <SolidColorBrush x:Key="AccentTeal" Color="#004D40"/>
        <SolidColorBrush x:Key="White" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="LightGray" Color="#F5F5F5"/>
        <SolidColorBrush x:Key="MediumGray" Color="#B0BEC5"/>
        <SolidColorBrush x:Key="DarkGray" Color="#546E7A"/>
        <SolidColorBrush x:Key="ErrorRed" Color="#D32F2F"/>

        <!-- TextBox Style -->
        <Style x:Key="ModernTextBox" TargetType="TextBox">
            <Setter Property="Height" Value="42"/>
            <Setter Property="Padding" Value="12,0"/>
            <Setter Property="FontFamily" Value="Microsoft Sans Serif"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="#37474F"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#B0BEC5"/>
            <Setter Property="BorderThickness" Value="1.5"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                            <ScrollViewer x:Name="PART_ContentHost"
                                          Margin="{TemplateBinding Padding}"
                                          VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter Property="BorderBrush" Value="#006064"/>
                                <Setter Property="BorderThickness" Value="2"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- PasswordBox Style -->
        <Style x:Key="ModernPasswordBox" TargetType="PasswordBox">
            <Setter Property="Height" Value="42"/>
            <Setter Property="Padding" Value="12,0"/>
            <Setter Property="FontFamily" Value="Microsoft Sans Serif"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="#37474F"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#B0BEC5"/>
            <Setter Property="BorderThickness" Value="1.5"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="PasswordBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                            <ScrollViewer x:Name="PART_ContentHost"
                                          Margin="{TemplateBinding Padding}"
                                          VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter Property="BorderBrush" Value="#006064"/>
                                <Setter Property="BorderThickness" Value="2"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Login Button Style -->
        <Style x:Key="LoginButton" TargetType="Button">
            <Setter Property="Height" Value="44"/>
            <Setter Property="Background" Value="#006064"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontFamily" Value="Microsoft Sans Serif"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="10"
                                BorderThickness="0">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#00838F"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#004D40"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- CheckBox Style -->
        <Style x:Key="ModernCheckBox" TargetType="CheckBox">
            <Setter Property="FontFamily" Value="Microsoft Sans Serif"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="#546E7A"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <Border x:Name="checkBorder"
                                    Width="18" Height="18"
                                    CornerRadius="4"
                                    BorderBrush="#B0BEC5"
                                    BorderThickness="1.5"
                                    Background="White">
                                <Path x:Name="checkMark"
                                      Data="M 2,8 L 6,12 L 14,4"
                                      Stroke="White"
                                      StrokeThickness="2"
                                      Visibility="Collapsed"/>
                            </Border>
                            <ContentPresenter Margin="8,0,0,0"
                                              VerticalAlignment="Center"/>
                        </StackPanel>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="checkBorder" Property="Background" Value="#006064"/>
                                <Setter TargetName="checkBorder" Property="BorderBrush" Value="#006064"/>
                                <Setter TargetName="checkMark" Property="Visibility" Value="Visible"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Forgot Password Link Style -->
        <Style x:Key="LinkButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Foreground" Value="#006064"/>
            <Setter Property="FontFamily" Value="Microsoft Sans Serif"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <TextBlock x:Name="txt"
                                   Text="{TemplateBinding Content}"
                                   Foreground="{TemplateBinding Foreground}"
                                   FontFamily="{TemplateBinding FontFamily}"
                                   FontSize="{TemplateBinding FontSize}"/>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="txt" Property="TextDecorations" Value="Underline"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <vms:LoginViewModel x:Key="LoginViewModel"/>
    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="420"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <!-- ===== LEFT PANEL - Welcome Section ===== -->
        <Grid Grid.Column="0" Background="#006064">

            <!-- Background Decorative Circles -->
            <Ellipse Width="300" Height="300"
                     Fill="#00838F" Opacity="0.3"
                     HorizontalAlignment="Left" VerticalAlignment="Top"
                     Margin="-80,-80,0,0"/>
            <Ellipse Width="220" Height="220"
                     Fill="#004D40" Opacity="0.25"
                     HorizontalAlignment="Right" VerticalAlignment="Bottom"
                     Margin="0,0,-60,-60"/>
            <Ellipse Width="120" Height="120"
                     Fill="#00ACC1" Opacity="0.2"
                     HorizontalAlignment="Right" VerticalAlignment="Top"
                     Margin="0,50,30,0"/>

            <!-- Content -->
            <StackPanel VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        Margin="40,0">

                <!-- Icon / Logo Area -->
                <Border Width="90" Height="90"
                        Background="White" Opacity="0.15"
                        CornerRadius="45"
                        HorizontalAlignment="Center"
                        Margin="0,0,0,24">
                    <Border Width="70" Height="70"
                            Background="White" Opacity="0.2"
                            CornerRadius="35"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center">
                        <!-- Book Icon using shapes -->
                        <Grid>
                            <Rectangle Width="36" Height="44"
                                       Fill="White" Opacity="0.9"
                                       RadiusX="3" RadiusY="3"
                                       Margin="4,0,0,0"/>
                            <Rectangle Width="4" Height="44"
                                       Fill="#006064" Opacity="0.8"
                                       HorizontalAlignment="Left"
                                       Margin="4,0,0,0"/>
                            <Rectangle Width="28" Height="2"
                                       Fill="#006064" Opacity="0.6"
                                       VerticalAlignment="Top"
                                       Margin="10,10,0,0"/>
                            <Rectangle Width="24" Height="2"
                                       Fill="#006064" Opacity="0.6"
                                       VerticalAlignment="Top"
                                       Margin="10,16,0,0"/>
                            <Rectangle Width="20" Height="2"
                                       Fill="#006064" Opacity="0.6"
                                       VerticalAlignment="Top"
                                       Margin="10,22,0,0"/>
                        </Grid>
                    </Border>
                </Border>

                <!-- Welcome Text -->
                <TextBlock Text="Welcome Back!"
                           FontFamily="Microsoft Sans Serif"
                           FontSize="28"
                           FontWeight="Bold"
                           Foreground="White"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,10"/>

                <TextBlock Text="Library Management System"
                           FontFamily="Microsoft Sans Serif"
                           FontSize="15"
                           Foreground="White" Opacity="0.85"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,20"/>

                <!-- Divider -->
                <Rectangle Height="1.5" Width="80"
                           Fill="White" Opacity="0.4"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,20"/>

                <!-- Description -->
                <TextBlock TextWrapping="Wrap"
                           TextAlignment="Center"
                           FontFamily="Microsoft Sans Serif"
                           FontSize="12.5"
                           Foreground="White" Opacity="0.75"
                           LineHeight="20"
                           Margin="0,0,0,32">
                    Manage your library resources efficiently.<LineBreak/>
                    Access books, members, and reports<LineBreak/>
                    all in one place.
                </TextBlock>

                <!-- Feature Pills -->
                <StackPanel HorizontalAlignment="Center" Margin="0,0,0,8">
                    <Border Background="White" Opacity="0.12"
                            CornerRadius="20" Padding="16,7"
                            Margin="0,0,0,8">
                        <TextBlock Text="📚  Books &amp; Catalog Management"
                                   FontFamily="Microsoft Sans Serif"
                                   FontSize="11.5"
                                   Foreground="White"
                                   HorizontalAlignment="Center"/>
                    </Border>
                    <Border Background="White" Opacity="0.12"
                            CornerRadius="20" Padding="16,7"
                            Margin="0,0,0,8">
                        <TextBlock Text="👤  Member &amp; Borrowing Tracking"
                                   FontFamily="Microsoft Sans Serif"
                                   FontSize="11.5"
                                   Foreground="White"
                                   HorizontalAlignment="Center"/>
                    </Border>
                    <Border Background="White" Opacity="0.12"
                            CornerRadius="20" Padding="16,7">
                        <TextBlock Text="📊  Reports &amp; Analytics"
                                   FontFamily="Microsoft Sans Serif"
                                   FontSize="11.5"
                                   Foreground="White"
                                   HorizontalAlignment="Center"/>
                    </Border>
                </StackPanel>

            </StackPanel>

            <!-- Bottom Version Text -->
            <TextBlock Text="v1.0.0  ·  Library Pro"
                       FontFamily="Microsoft Sans Serif"
                       FontSize="10.5"
                       Foreground="White" Opacity="0.45"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Bottom"
                       Margin="0,0,0,16"/>
        </Grid>

        <!-- ===== RIGHT PANEL - Login Form ===== -->
        <Grid Grid.Column="1" Background="White">

            <!-- Top-right decoration -->
            <Ellipse Width="140" Height="140"
                     Fill="#E0F7FA"
                     HorizontalAlignment="Right"
                     VerticalAlignment="Top"
                     Margin="0,-50,-50,0"/>

            <!-- Main Form Container -->
            <StackPanel VerticalAlignment="Center"
                        Margin="48,0,48,0">

                <!-- Header -->
                <TextBlock Text="Sign In"
                           FontFamily="Microsoft Sans Serif"
                           FontSize="26"
                           FontWeight="Bold"
                           Foreground="#006064"
                           Margin="0,0,0,6"/>

                <TextBlock Text="Enter your credentials to continue"
                           FontFamily="Microsoft Sans Serif"
                           FontSize="12.5"
                           Foreground="#78909C"
                           Margin="0,0,0,36"/>

                <!-- Username Field -->
                <TextBlock Text="Username"
                           FontFamily="Microsoft Sans Serif"
                           FontSize="12"
                           FontWeight="SemiBold"
                           Foreground="#455A64"
                           Margin="0,0,0,7"/>

                <Grid Margin="0,0,0,20">
                    <TextBox x:Name="UsernameBox"
                             Style="{StaticResource ModernTextBox}"
                             Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                             Padding="40,0,12,0"/>
                    <!-- User Icon -->
                    <Path Data="M12,12 C14.2091,12 16,10.2091 16,8 C16,5.7909 14.2091,4 12,4 C9.7909,4 8,5.7909 8,8 C8,10.2091 9.7909,12 12,12 Z M12,14 C9.3333,14 4,15.3333 4,18 L4,20 L20,20 L20,18 C20,15.3333 14.6667,14 12,14 Z"
                          Fill="#B0BEC5"
                          Width="16" Height="16"
                          Stretch="Uniform"
                          HorizontalAlignment="Left"
                          VerticalAlignment="Center"
                          Margin="12,0,0,0"/>
                </Grid>

                <!-- Password Field -->
                <TextBlock Text="Password"
                           FontFamily="Microsoft Sans Serif"
                           FontSize="12"
                           FontWeight="SemiBold"
                           Foreground="#455A64"
                           Margin="0,0,0,7"/>

                <Grid Margin="0,0,0,20">
                    <PasswordBox Style="{StaticResource ModernPasswordBox}"
                                 Padding="40,0,12,0"
                                 helpers:PasswordBoxHelper.BindPassword="True"
                                 helpers:PasswordBoxHelper.BoundPassword="{Binding Password, 
                                 UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                    <!-- Lock Icon -->
                    <Path Data="M18,8 L17,8 L17,6 C17,3.24 14.76,1 12,1 C9.24,1 7,3.24 7,6 L7,8 L6,8 C4.9,8 4,8.9 4,10 L4,20 C4,21.1 4.9,22 6,22 L18,22 C19.1,22 20,21.1 20,20 L20,10 C20,8.9 19.1,8 18,8 Z M12,17 C10.9,17 10,16.1 10,15 C10,13.9 10.9,13 12,13 C13.1,13 14,13.9 14,15 C14,16.1 13.1,17 12,17 Z M15.1,8 L8.9,8 L8.9,6 C8.9,4.29 10.29,2.9 12,2.9 C13.71,2.9 15.1,4.29 15.1,6 L15.1,8 Z"
                          Fill="#B0BEC5"
                          Width="16" Height="16"
                          Stretch="Uniform"
                          HorizontalAlignment="Left"
                          VerticalAlignment="Center"
                          Margin="12,0,0,0"/>
                </Grid>

                <!-- Remember Me + Forgot Password Row -->
                <Grid Margin="0,0,0,28">
                    <CheckBox Style="{StaticResource ModernCheckBox}"
                              Content="Remember me"
                              IsChecked="{Binding RememberMe}"
                              HorizontalAlignment="Left"
                              VerticalAlignment="Center"/>
                </Grid>

                <!-- Login Button -->
                <Button Content="SIGN IN"
                        Style="{StaticResource LoginButton}"
                        Command="{Binding LoginCommand}"
                        Margin="0,0,0,20"/>

            </StackPanel>

            <!-- Bottom Copyright -->
            <TextBlock Text="© 2024 Library Management System. All rights reserved."
                       FontFamily="Microsoft Sans Serif"
                       FontSize="10"
                       Foreground="#B0BEC5"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Bottom"
                       Margin="0,0,0,16"/>
        </Grid>
    </Grid>
</UserControl>